<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="assets/Icon3.png" type="image/x-icon">
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/main.css">
    
    <title>Geo iSTEM</title>
</head>
<body>
    <!-- <div id="welcome">
        <div>
            <h1>Geo iSTEM</h1>
            <button id="welcome-button">GO</button>
        </div>
    </div> -->
    <div id="output-modal"></div>
    <div id="shape-maker">
        <div id="expand">
            <div></div>    
        </div>
        <!-- <div id="appname">
            <h1>Geo-iSTEM</h1>
        </div> -->
        <section class="shapes-2d">
            <h1>Bentuk 2D</h1>
            <div id="shapes-2d-selector">
                <div class="shape-container" id="select-square" onclick="createShape('square')">
                    <img src="assets/shapes-nobackground/segi-empat-sama.png" alt="segi empat sama" draggable="false">
                    <span class="tooltip-text">
                        Segi Empat Sama
                    </span>
                </div>
                <div class="shape-container" id="select-rectangle" onclick="createShape('rectangle')">
                    <img src="assets/shapes-nobackground/segi-empat-tepat.png" alt="segi empat tepat" draggable="false">
                    <span class="tooltip-text">
                        Segi Empat Tepat
                    </span>
                </div>
                <div class="shape-container" id="select-triangle" onclick="createShape('triangle')">
                    <img src="assets/shapes-nobackground/segi-tiga.png" alt="segi tiga"  draggable="false">
                    <span class="tooltip-text">
                        Segi Tiga
                    </span>
                </div>
                <div class="shape-container" id="select-circle" onclick="createShape('circle')">
                    <img src="assets/shapes-nobackground/bulatan.png" alt="bulatan" draggable="false">
                    <span class="tooltip-text">
                        Bulatan
                    </span>
                </div>
                <div class="shape-container" id="select-oval" onclick="createShape('oval')">
                    <img src="assets/shapes-nobackground/oval.png" alt="oval" draggable="false">
                    <span class="tooltip-text">
                        Oval
                    </span>
                </div>
                <div class="shape-container" id="select-rhombus" onclick="createShape('rhombus')">
                    <img src="assets/shapes-nobackground/rombus2.png" alt="rombus" draggable="false">
                    <span class="tooltip-text">
                        Rombus
                    </span>
                </div>
                <div class="shape-container" id="select-trapezium" onclick="createShape('trapezium')">
                    <img src="assets/shapes-nobackground/trapezium.png" alt="trapezium" draggable="false">
                    <span class="tooltip-text">
                        Trapezium
                    </span>
                </div>
                <div class="shape-container" id="select-parellogram" onclick="createShape('parallelogram')">
                    <img src="assets/shapes-nobackground/segi-empat-selari.png" alt="segi empat selari" draggable="false">
                    <span class="tooltip-text">
                        Segi Empat Selari
                    </span>
                </div>
                <div class="shape-container" onclick="createPolygon(5)" >
                    <img src="assets/shapes-nobackground/pentagon.png" alt="pentagon" draggable="false">
                    <span class="tooltip-text">
                        Pentagon
                    </span>
                </div>
                <div class="shape-container" onclick="createPolygon(6)">
                    <img src="assets/shapes-nobackground/hexagon.png" alt="hexagon"  draggable="false">
                    <span class="tooltip-text">
                        Hexagon
                    </span>
                </div>
                <div class="shape-container" onclick="createPolygon(7)">
                    <img src="assets/shapes-nobackground/heptagon.png" alt="heptagon"  draggable="false">
                    <span class="tooltip-text">
                        Heptagon
                    </span>
                </div>
                <div class="shape-container" onclick="createPolygon(8)">
                    <img src="assets/shapes-nobackground/octagon.png" alt="octagon"  draggable="false">
                    <span class="tooltip-text">
                        Octagon
                    </span>
                </div>
                <div class="shape-container" onclick="createPolygon(9)">
                    <img src="assets/shapes-nobackground/nonagon.png" alt="nonagon"  draggable="false">
                    <span class="tooltip-text">
                        Nonagon
                    </span>
                </div>
                <div class="shape-container" onclick="createPolygon(10)">
                    <img src="assets/shapes-nobackground/decagon.png" alt="decagon"  draggable="false">
                    <span class="tooltip-text">
                        Decagon
                    </span>
                </div>
                <div class="shape-container" onclick="createPolygon(11)">
                    <img src="assets/shapes-nobackground/hendecagon.png" alt="hendecagon"  draggable="false">
                    <span class="tooltip-text">
                        Hendecagon
                    </span>
                </div>
                <div class="shape-container" onclick="createPolygon(12)">
                    <img src="assets/shapes-nobackground/dodecagon.png" alt="dodecagon"  draggable="false">
                    <span class="tooltip-text">
                        Dodecagon
                    </span>
                </div>
            </div>
        </section>
        <section class="shapes-3d">
            <h1 style="text-align: center;">Bentuk 3D</h1>
            <div id="shapes-3d-selector">
                <div class="shape-container" onclick="create3DShape('cube')">
                    <img src="assets/3D Shapes/cube/cube-CG.png" alt="kubus" draggable="false">
                    <span class="tooltip-text">
                        Kubus
                    </span>
                </div>
                <div class="shape-container" onclick="create3DShape('cuboid')">
                    <img src="assets/3D Shapes/cuboid/cuboid-ML.png" alt="kuboid" draggable="false">
                    <span class="tooltip-text">
                        Kuboid
                    </span>
                </div>
                <div class="shape-container" onclick="create3DShape('cylinder')">
                    <img src="assets/3D Shapes/cylinder/cylinder-PA.png" alt="silinder" draggable="false">
                    <span class="tooltip-text">
                        Silinder
                    </span>
                </div>
                <div class="shape-container" onclick="create3DShape('sphere')">
                    <img src="assets/3D Shapes/sphere/sphere-EB.png" alt="sfera" draggable="false">
                    <span class="tooltip-text">
                        Sfera
                    </span>
                </div>
                <div class="shape-container" onclick="create3DShape('pyramid')">
                    <img src="assets/3D Shapes/pyramid/pyramid-BY.png" alt="piramid" draggable="false">
                    <span class="tooltip-text">
                        Piramid
                    </span>
                </div>
                <div class="shape-container" onclick="create3DShape('cone')">
                    <img src="assets/3D Shapes/cone/cone-EF.png" alt="kon" draggable="false">
                    <span class="tooltip-text">
                        Kon
                    </span>
                </div>
            </div>
        </section>
    </div>

    <main>
        <div id="button-wrapper">
            <div class="button-container">
                <button id="capture-button" onclick="takeShot()"><img src="assets/capture-icon2.png" alt="camera-img" tabindex="-1" draggable="false" oncontextmenu="return false;"></button>
            </div>
            <div class="button-container">
                <button id="delete-button">
                    <img src="assets/delete-icon.png" alt="delete">
                </button>
            </div>
        </div>
        
        <div id="canvas" oncontextmenu="return false;"></div>
    </main>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.5.1/gsap.min.js"></script>
    <script>
        // animations when page is loaded
        const tl = gsap.timeline(); 
        gsap.defaults({
            ease: 'circle.out',
            duration: 0.9
        });
        gsap.from('#canvas', {y: '-50%', opacity: '0'})
        gsap.from('#shape-maker', {x: '-50%', opacity: '0'})
        gsap.from('#button-wrapper', {duration: 1.5, opacity: '0'})

        const pendingOps = new Set();

        window.addEventListener('beforeunload', (event) => {
        if (pendingOps.size) {
            event.returnValue = 'There is pending work. Sure you want to leave?';
        }
        });

        function addToPendingWork(promise) {
            pendingOps.add(promise);
            const cleanup = () => pendingOps.delete(promise);
            promise.then(cleanup).catch(cleanup);
        }
    </script>
    <script>
        const shapeContainer = document.getElementsByClassName('shape-container');
        Array.from(shapeContainer).forEach(function(container) {
            container.addEventListener('click', buttonClickSound);
        });
        function buttonClickSound() {
            var sound = new Audio('sounds/Button Click Sound.mp3');
            sound.play();
        }
    </script>
</body>
<script src="https://unpkg.com/konva@7.0.3/konva.min.js"></script>
<script src="js/html2canvas.js"></script>
<script src="js/captureCanvas.js"></script>
<script src="js/expandShapeMaker.js"></script>
<script src="js/create2dShape.js"></script>
<script src="js/create3dShape.js"></script>
<script src="js/makeSelection.js"></script>
<script src="js/shapeEvents.js"></script>
<script src="js/getPolygonPoints.js"></script>
<script src="js/changeStageSize.js"></script>
</html>