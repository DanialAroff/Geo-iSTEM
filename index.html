<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="assets/Icon1.png" type="image/x-icon">
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/main.css">
    <title>Geo iSTEM</title>
</head>
<body>
    <!-- <div class="color-picker">
        <div class="picker-header">
            <h3>Warna</h3>
            <button class="picker-button"><img src="assets/arrow-vertical-white.png" alt="" class="arrow"></button>
        </div>
        <div class="color-container-main">
            <div class="color-container">
                <div class="color" style="background: #000;"></div>
            </div>
            <div class="color-container">
                <div class="color" style="background: #545454;"></div>
            </div>
            <div class="color-container">
                <div class="color" style="background: #737373;"></div>
            </div>
            <div class="color-container">
                <div class="color" style="background: #A6A6A6;"></div>
            </div>
            <div class="color-container">
                <div class="color" style="background: #D9D9D9;"></div>
            </div>
            <div class="color-container">
                <div class="color" style="background: #FFFFFF;"></div>
            </div>
            <div class="color-container">
                <div class="color" style="background: #e74c3c;"></div>
            </div>
            <div class="color-container">
                <div class="color" style="background: #FF5757;"></div>
            </div>
            <div class="color-container">
                <div class="color" style="background: #FF66C4;"></div>
            </div>
            <div class="color-container">
                <div class="color" style="background: #CB6CE6;"></div>
            </div>
            <div class="color-container">
                <div class="color" style="background: #8C52FF;"></div>
            </div>
            <div class="color-container">
                <div class="color" style="background: #5E17EB;"></div>
            </div>
            <div class="color-container">
                <div class="color" style="background: #03999F;"></div>
            </div>
            <div class="color-container">
                <div class="color" style="background: #00C2CB;"></div>
            </div>
            <div class="color-container">
                <div class="color" style="background: #5CE1E6;"></div>
            </div>
            <div class="color-container">
                <div class="color" style="background: #54A0FF;"></div>
            </div>
            <div class="color-container">
                <div class="color" style="background: #5271FF;"></div>
            </div>
            <div class="color-container">
                <div class="color" style="background: #004AAD;"></div>
            </div>
            <div class="color-container">
                <div class="color" style="background: #018138"></div>
            </div>
            <div class="color-container">
                <div class="color" style="background: #7ED957;"></div>
            </div>
            <div class="color-container">
                <div class="color" style="background: #C9E265;"></div>
            </div>
            <div class="color-container">
                <div class="color" style="background: #ffd105"></div>
            </div>
            <div class="color-container">
                <div class="color" style="background: #FFBD59;"></div>
            </div>
            <div class="color-container">
                <div class="color" style="background: #FF914D;"></div>
            </div>
        </div>
    </div> -->
    <!-- <div id="output-modal">
        <button id="download-button">Muat Turun</button>
        <button id="modalclose-button">Tutup</button>
    </div> -->
   
    <div class="picker">
        <div class="picker-header">
            <h3>Bentuk</h3>
            <button class="picker-button"><img src="assets/arrow-vertical-white.png" alt="" class="arrow"></button>
        </div>
        <section class="2d-shapes-picker">
            <span class="tooltip-whatshape">
                Segi Empat Sama
            </span>
            <div class="shapes-2d">
                <div class="shape-container" onclick="createShape('square')">
                    <img src="assets/shapes-nobackground/segi-empat-sama.png" alt="segi empat sama" draggable="false">
                    <span class="tooltip-text">
                        Segi Empat Sama
                    </span>
                </div>
                <div class="shape-container" onclick="createShape('rectangle')">
                    <img src="assets/shapes-nobackground/segi-empat-tepat.png" alt="segi empat tepat" draggable="false">
                    <span class="tooltip-text">
                        Segi Empat Tepat
                    </span>
                </div>
                <div class="shape-container" onclick="createShape('triangle')">
                    <img src="assets/shapes-nobackground/segi-tiga.png" alt="segi tiga"  draggable="false">
                    <span class="tooltip-text">
                        Segi Tiga
                    </span>
                </div>
                <div class="shape-container" onclick="createShape('circle')">
                    <img src="assets/shapes-nobackground/bulatan.png" alt="bulatan" draggable="false">
                    <span class="tooltip-text">
                        Bulatan
                    </span>
                </div>
                <div class="shape-container" id="select-oval" onclick="createShape('oval')">
                    <img src="assets/shapes-nobackground/oval.png" alt="oval" draggable="false">
                    <span class="tooltip-text">
                        Oval
                    </span>
                </div>
                <div class="shape-container" id="select-rhombus" onclick="createShape('rhombus')">
                    <img src="assets/shapes-nobackground/rombus2.png" alt="rombus" draggable="false">
                    <span class="tooltip-text">
                        Rombus
                    </span>
                </div>
                <div class="shape-container" id="select-trapezium" onclick="createShape('trapezium')">
                    <img src="assets/shapes-nobackground/trapezium.png" alt="trapezium" draggable="false">
                    <span class="tooltip-text">
                        Trapezium
                    </span>
                </div>
                <div class="shape-container" id="select-parellogram" onclick="createShape('parallelogram')">
                    <img src="assets/shapes-nobackground/segi-empat-selari.png" alt="segi empat selari" draggable="false">
                    <span class="tooltip-text">
                        Segi Empat Selari
                    </span>
                </div>
                <div class="shape-container" onclick="createPolygon(5)" >
                    <img src="assets/shapes-nobackground/pentagon.png" alt="pentagon" draggable="false">
                    <span class="tooltip-text">
                        Pentagon
                    </span>
                </div>
                <div class="shape-container" onclick="createPolygon(6)">
                    <img src="assets/shapes-nobackground/hexagon.png" alt="hexagon"  draggable="false">
                    <span class="tooltip-text">
                        Hexagon
                    </span>
                </div>
                <div class="shape-container" onclick="createPolygon(7)">
                    <img src="assets/shapes-nobackground/heptagon.png" alt="heptagon"  draggable="false">
                    <span class="tooltip-text">
                        Heptagon
                    </span>
                </div>
                <div class="shape-container" onclick="createPolygon(8)">
                    <img src="assets/shapes-nobackground/octagon.png" alt="octagon"  draggable="false">
                    <span class="tooltip-text">
                        Octagon
                    </span>
                </div>
                <div class="shape-container" onclick="createPolygon(9)">
                    <img src="assets/shapes-nobackground/nonagon.png" alt="nonagon"  draggable="false">
                    <span class="tooltip-text">
                        Nonagon
                    </span>
                </div>
                <div class="shape-container" onclick="createPolygon(10)">
                    <img src="assets/shapes-nobackground/decagon.png" alt="decagon"  draggable="false">
                    <span class="tooltip-text">
                        Decagon
                    </span>
                </div>
                <div class="shape-container" onclick="createPolygon(11)">
                    <img src="assets/shapes-nobackground/hendecagon.png" alt="hendecagon"  draggable="false">
                    <span class="tooltip-text">
                        Hendecagon
                    </span>
                </div>
                <div class="shape-container" onclick="createPolygon(12)">
                    <img src="assets/shapes-nobackground/dodecagon.png" alt="dodecagon"  draggable="false">
                    <span class="tooltip-text">
                        Dodecagon
                    </span>
                </div> 
                
                <div class="shape-container" onclick="create3DShape('cube')">
                    <img src="assets/3D Shapes/cube/cube-CG.png" alt="kubus" draggable="false" loading="lazy">
                    <span class="tooltip-text">
                        Kubus
                    </span>
                </div>
                <div class="shape-container" onclick="create3DShape('cuboid')">
                    <img src="assets/3D Shapes/cuboid/cuboid-ML.png" alt="kuboid" draggable="false" loading="lazy">
                    <span class="tooltip-text">
                        Kuboid
                    </span>
                </div>
                <div class="shape-container" onclick="create3DShape('cylinder')">
                    <img src="assets/3D Shapes/cylinder/cylinder-PA.png" alt="silinder" draggable="false" loading="lazy">
                    <span class="tooltip-text">
                        Silinder
                    </span>
                </div>
                <div class="shape-container" onclick="create3DShape('sphere')">
                    <img src="assets/3D Shapes/sphere/sphere-EB.png" alt="sfera" draggable="false" loading="lazy">
                    <span class="tooltip-text">
                        Sfera
                    </span>
                </div>
                <div class="shape-container" onclick="create3DShape('pyramid')">
                    <img src="assets/3D Shapes/pyramid/pyramid-BY.png" alt="piramid" draggable="false" loading="lazy">
                    <span class="tooltip-text">
                        Piramid
                    </span>
                </div>
                <div class="shape-container" onclick="create3DShape('cone')">
                    <img src="assets/3D Shapes/cone/cone-EF.png" alt="kon" draggable="false" loading="lazy">
                    <span class="tooltip-text">
                        Kon
                    </span>
                </div>
            </div>
        </section>
    </div>

    <div class="instruction-opener">
        <button onclick="openInstructions()"><img src="assets/" alt="">Arahan</button>
    </div>

    <div class="instructions-container">
        <div class="instructions-card">
            <button class="close-instructions-button" onclick="closeInstructions()">Tutup</button>
            <div class="instructions-header">
                <h1>ARAHAN</h1>
                <p>Geo iSTEM mengandungi beberapa langkah yang perlu diikuti.</p>
            </div>
            <div class="instructions-parts">
                <div class="instructions part-1">
                    <h2>Langkah 1</h2>
                    <p>Pelajar perlu membuka menu yang mempunyai pilihan bentuk dengan menekan simbol <img src="assets/arrow-vertical-black.png" alt="anak panah ke bawah"> .</p>
                    <img src="assets/unopened menu.PNG" alt="" loading="lazy">
                    <p>Pelajar boleh menutup menu ini dengan menekan simbol yang sama sekali lagi.</p>
                </div>
                <div class="instructions part-2">
                    <h2>Langkah 2</h2>
                    <p>Pelajar perlu memilih mana-mana bentuk yang terdapat di dalam menu dan klik untuk mendapatkan output.</p>
                    <img src="assets/opened menu.PNG" alt="menu terbuka" loading="lazy">
                </div>
            </div>
        </div>
    </div>
    
    <main>
        <div id="button-wrapper">
            <div class="button-container">
                <button id="download-button"><img src="assets/download-icon-02.png" alt="camera-img" tabindex="-1" draggable="false" oncontextmenu="return false;"></button>
            </div>
            <!-- <div class="button-container">
                <button id="capture-button" onclick="takeShot()"><img src="assets/capture-icon3.png" alt="camera-img" tabindex="-1" draggable="false" oncontextmenu="return false;"></button>
            </div> -->
            <div class="button-container">
                <button id="delete-button">
                    <img src="assets/delete-icon2.png" alt="delete">
                </button>
            </div>
        </div>
        
        <div id="canvas" oncontextmenu="return false;"></div>
        <div class="hide" id="rmenu">
            <ul>
                <li onclick="moveUp()">Gerak ke Depan</li>
                <li onclick="moveDown()">Gerak ke Belakang</li>
                <li onclick="deleteShape()">Padam Bentuk<span>Delete</span></li>
            </ul>
        </div>
    </main>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.5.1/gsap.min.js"></script>
    <script>
        // supposedly gives warning to user when leaving the page
        const pendingOps = new Set();

        window.addEventListener('beforeunload', (event) => {
        if (pendingOps.size) {
            event.returnValue = 'There is pending work. Sure you want to leave?';
        }
        });

        function addToPendingWork(promise) {
            pendingOps.add(promise);
            const cleanup = () => pendingOps.delete(promise);
            promise.then(cleanup).catch(cleanup);
        }
    </script>
    <script>
        // animations when page is loaded
        const tl = gsap.timeline(); 
        gsap.defaults({
            ease: 'circle.out',
            duration: 0.9
        });
        gsap.from('#canvas', {y: '-50%', opacity: '0'})
        gsap.from('.picker', {x: '-50%', opacity: '0'})
        gsap.from('#button-wrapper', {duration: 1.5, opacity: '0'})
    </script>
    <script>
        const shapeContainer = document.getElementsByClassName('shape-container');
        Array.from(shapeContainer).forEach(function(container) {
            container.addEventListener('click', buttonClickSound);
        });
        function buttonClickSound() {
            var sound = new Audio('sounds/Button Click Sound.mp3');
            sound.play();
        }
    </script>
    <script>
        const pickerContainer = document.getElementsByClassName('picker');
        const pickerHeader = document.getElementsByClassName('picker-header');
        const pickerBtn = document.getElementsByClassName('picker-button');
        const picker2d = document.getElementsByClassName('2d-shapes-picker');
        const colorContainerMain = document.getElementsByClassName('color-container-main');
        var arrow = document.getElementsByClassName('arrow');

        pickerBtn[0].addEventListener('click', function() {
            if (picker2d[0].style.maxHeight) {
                picker2d[0].style.maxHeight = null;
                arrow[0].style.transform = 'unset';
            } else {
                picker2d[0].style.maxHeight = '360px';   
                arrow[0].style.transform = 'rotate(180deg)';
            }
        });
        // pickerBtn[0].addEventListener('click', function() {
        //     if (colorContainerMain[0].style.maxWidth) {
        //         colorContainerMain[0].style.maxWidth = null;
        //         // colorContainerMain[0].style.padding = null;
        //         arrow[0].style.transform = 'unset';
        //     } else {
        //         colorContainerMain[0].style.maxWidth = '250px';
        //         // colorContainerMain[0].style.padding = '1rem';
        //         arrow[0].style.transform = 'rotate(180deg)';
        //     }
        // });

    </script>
</body>
<script src="https://unpkg.com/konva@7.0.3/konva.min.js"></script>
<script src="js/html2canvas.js"></script>
<script src="js/captureCanvas.js"></script>
<script src="js/create2dShape.js"></script>
<script src="js/create3dShape.js"></script>
<script src="js/dragHTML.js"></script>
<script src="js/makeSelection.js"></script>
<script src="js/shapeEvents.js"></script>
<script src="js/getPolygonPoints.js"></script>
<script src="js/changeStageSize.js"></script>
<script src="js/saveStage.js"></script>
<script src="js/instructionsOp.js"></script>

</html>